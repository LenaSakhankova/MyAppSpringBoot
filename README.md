# MyAppSpringBoot

!В видео можно ознакомиться с логикой приложения, чтобы было более наглядно(т.к. я дополнительно для удобства восприятия информации сделала его и в виде view представлений)!
Предметная область приложения: библиотека. В приложении предусмотрена авторизация пользователя, поэтому было выделено 2 роли: администратор, пользователь. Администратор - администрация библиотеки, например, должность - заведующий; пользователь - сотрудник библиотеки. 

Библиотекарь может проводить манипуляции с книгами и читателями. Ему доступны:
Получить список книг; удалить, измененить, добавить книгу; назначить читателю или освободить книгу у читателя. Получить список читателей; удалить, добавить, изменить читателя. Отношение между этими сущностями "один ко многим" - у одного читателя может быть много книг.

Администрации необходимы функции для работы с сотрудниками. Ему доступны:
Список сотрудников, удалить, добавить, изменить сотрудника. 

Взаимосвязь объектов: репозиторий - сервис(работа с entity) - фасад(работа с dto) - контроллер. Чтобы к ним перейти пройдите путь: MyAppForTrainnier\src\main\java\com\example\myappfortrainnier\...
Все зависимости находятся в pom.xml;

В качестве хранения данных была выбрана база данных MySQL. Пул подключений к БД находится в папке application.properties(путь: src - main - resources).
Для корректной работы приложения необходимо создать 3 сущности в Базе данных "testLibrary": "book", "librarian", "reader".

Запросы на создание баз данных клиент библиотеки, книги библиотеки, сотрудники:

--"читатель"
CREATE TABLE reader (
                        id BIGINT PRIMARY KEY AUTO_INCREMENT,
                        FIO VARCHAR(500) NOT NULL,
                        year_of_birth INT NOT NULL,
			address VARCHAR(255),
    			profession VARCHAR(255),
                        phone_number VARCHAR(20)
);


https://github.com/LenaSakhankova/MyAppSpringBoot/assets/100844312/658e862f-0c08-44a3-a7d7-3322d5f888f9


-- Создание таблицы "book"
CREATE TABLE book (
                      id INT PRIMARY KEY AUTO_INCREMENT,
                      name VARCHAR(1000) NOT NULL,
                      author VARCHAR(100) NOT NULL,
                      year_of_creating INT,
                      short_description VARCHAR(1000),
                      storage_location INT,
                      tom INT,
                      person_id INT,
                      FOREIGN KEY (person_id) REFERENCES reader(id)
);

-- Создание таблицы "librarian"
CREATE TABLE IF NOT EXISTS librarian (
  id INT AUTO_INCREMENT PRIMARY KEY,
  FIO VARCHAR(100) NOT NULL,
  year_of_birth INT NOT NULL,
  phone_number VARCHAR(25)
);

заполнить таблицу читателей можно:

INSERT INTO reader (FIO, year_of_birth, phone_number, address, profession)
VALUES
    ('Иванов Иван Иванович', 1990, '1234567', 'ул. Главная, 1', 'Инженер'),
    ('Петрова Анна Сергеевна', 1981, '9876543', 'ул. Центральная, 5', 'Учитель'),
    ('Серов Леонид Викторович', 1995, '2345678', 'ул. Парковая, 10', 'Врач'),
    ('Смирнов Михаил Викторович', 1988, '2345678', 'ул. Парковая, 15', 'Врач'),
    ('Смирнова Лидия Дмитриевна', 1966, '2345678', 'ул. Парня, 1', 'Горничная'),
    ('Осипов Андрей Петрович', 1977, '2345678', 'ул. Мясная, 3', 'Разработчик'),
    ('Долгих Анна Юрьевна', 1989, '2345678', 'ул. Грозная, 10', 'Вахтёр'),
    ('Заводкина Дина Витальевна', 1995, '2345678', 'ул. Парковая, 10', 'Продавец'),
    ('Сидорова Екатерина Алексеевна', 1992, '3456789', 'ул. Лесная, 3', 'Художник');

заполнить книги:

INSERT INTO book (name, author, year_of_creating, short_description, storage_location, tom, person_id)
VALUES
    ('Мастер и Маргарита', 'Михаил Булгаков', 1967, 'Роман о самом главном', 1, 1, 1),
    ('Война и мир', 'Лев Толстой', 1869, 'Эпический роман о войне и любви', 2, 1, 2),
    ('Преступление и наказание', 'Федор Достоевский', 1866, 'Психологический роман о преступлении и морали', 3, 1, 3),
    ('Метро 2033', 'Дмитрий Глуховский', 2005, 'Постапокалиптический роман о выживании в московском метро', 5, 1, 5),
    ('Алхимик', 'Пауло Коэльо', 1988, 'Философская история о поиске смысла жизни и осуществлении мечты', 6, 1, 6),
    ('Анна Каренина', 'Лев Толстой', 1877, 'Роман о любви и обществе', 4, 1, 4);

Заполнить таблицу "librarian":

INSERT INTO librarian (FIO, year_of_birth, phone_number)
VALUES
  ('Иван Иванов', 1980, '1234567890'),
  ('Анна Петрова', 1985, '9876543210'),
  -- Добавьте остальных сотрудников
  ('Алексей Смирнов', 1990, '5555555555'),
  ('Екатерина Козлова', 1992, '1111111111'),
  ('Михаил Волков', 1982, '9999999999'),
  ('Сара Томас', 1988, '7777777777'),
  ('Дмитрий Лебедев', 1987, '8888888888'),
  ('Ольга Сидорова', 1995, '3333333333'),
  ('Игорь Федоров', 1991, '4444444444');

Для запуска приложения Spring Boot вам понадобится выполнить следующие шаги:

1) Убедитесь, что у вас установлен JDK (Java Development Kit) версии, совместимой с вашей версией Spring Boot. 2) Используйте интегрированную среду разработки, такую как IntelliJ IDEA.
3) Найдите класс MyAppForTrainnierApplication с методом main и запустите его "run".



Результат сгенирирован с использованием инструмента тестирования Postman. Файл коллекции можно найти по пути: Library.postman_collection.json.

Перед отправлением КАЖДОГО запроса нужна авторизация(обратите !ВНИМАНИЕ!, что запросы, которые начинаются с "/librarians" доступны только пользователям с ролью ADMIN, остальные запросы доступны и USER, и ADMIN):
Для пользователя -> username: user1, password: password1 или username: user2, password: password2
Для администратора -> username: admin, password: password3

(!данные для входа в систему инициализируются в классе DatabaseInitializer (MyAppForTrainnier\src\main\java\com\example\myappfortrainnier\springConfig\DatabaseInitializer.java),
отдельной сущности для них нет в БД, так как логикой это не предусмотрено)

!ПРИМЕРЫ!
Как составлять запросы: 1) Работа с читателями(ПОДХОДЯТ ДАННЫЕ ДЛЯ АВТОРИЗАЦИИ И ПОЛЬЗОВАТЕЛЯ, И АДМИНА): 
1.1 просмотр всех
- выбираем тип запроса GET,
- прописываем путь  http://localhost:8080/people
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
-нажимем "send"
1.2 просмотр определённого
- выбираем тип запроса GET,
- прописываем путь  http://localhost:8080/people/1 (например, 1)
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
-нажимем "send"
1.3 удаление
- выбираем тип запроса GET,
- прописываем путь  http://localhost:8080/people/10/delete (например, 10)
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
-нажимем "send"
1.4 создание
- выбираем тип запроса POST,
- прописываем путь  http://localhost:8080/people/create
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
- рядом выбираем поле body - row - json(text меняем на json) и записываем, что хотим "создать"
(Например,
 {
        "yearOfBirth": 1987,
        "phoneNumber": "126399777",
        "address": "ул. Зинина, 13",
        "profession": "Пилот",
        "fio": "Щербак Нина Олеговна"
})
-нажимем "send"
1.5 изменение
- выбираем тип запроса PUT,
- прописываем путь  http://localhost:8080/people/1
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
- рядом выбираем поле body - row - json(text меняем на json) и записываем, что хотим "ИЗМЕНИТЬ"
(Например,
  {
        "id": 1,
        "yearOfBirth": 1987,
        "phoneNumber": "126398889",
        "address": "ул. Зинина, 13",
        "profession": "Пилот",
        "fio": "Зиневич Федор Жаннович"
})
-нажимем "send"

2) Работа с книгами(ПОДХОДЯТ ДАННЫЕ ДЛЯ АВТОРИЗАЦИИ И ПОЛЬЗОВАТЕЛЯ, И АДМИНА):
2.1 просмотр всех
- выбираем тип запроса GET,
- прописываем путь  http://localhost:8080/books
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
-нажимем "send"
2.2 просмотр определённого
- выбираем тип запроса GET,
- прописываем путь  http://localhost:8080/books/1 (например, 1)
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
-нажимем "send"
2.3 удаление
- выбираем тип запроса DELETE
- прописываем путь  http://localhost:8080/books/1 (например, 1)
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
-нажимем "send"(будет лишь сообщение, что все прошло успешно, не будет возвращен DTO)
2.4 создание
- выбираем тип запроса POST,
- прописываем путь  http://localhost:8080/books
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
- рядом выбираем поле body - row - json(text меняем на json) и записываем, что хотим "создать"
(Например,
 {
    "name": "МУМУ",
    "author": "И.С. Тургенев",
    "year": 1980,
    "shortDescription": "Грустная история одного человека",
    "storageLocation": 1,
    "tom": 1,
    "personId": 9
})
-нажимем "send"
2.5 изменение
- выбираем тип запроса PUT,
- прописываем путь  http://localhost:8080/books/7
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
- рядом выбираем поле body - row - json(text меняем на json) и записываем, что хотим "ИЗМЕНИТЬ"
(Например,
  {
    "id": 7,
    "name": "Муму",
    "author": "Тургенев",
    "year": 1980,
    "shortDescription": "Драма о самом главном",
    "storageLocation": 1,
    "tom": 1,
    "personId": 2
})
-нажимем "send"
2.6 освобождение книги (принесли книгу в библиотеку - нужно снять ее с читателя)
- выбираем тип запроса POST,
- прописываем путь  http://localhost:8080/books/1/release
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
-"send"(только код сообщения об успешности на выходе)
2.7 назначение книги читателю
- выбираем тип запроса POST,
- прописываем путь  http://localhost:8080/books/1/release
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: user1
		password: password1
- рядом выбираем поле body - row - json(text меняем на json) и записываем, кому хотим назначить книигу
{
  "id": 2
}
-"send"

3) Работа с библиотекарями(ПОДХОДЯТ ДАННЫЕ ДЛЯ АВТОРИЗАЦИИ ТОЛЬКО АДМИНА): 
3.1 просмотр всех
- выбираем тип запроса GET,
- прописываем путь  http://localhost:8080/librarians
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: admin
		password: password3
-нажимем "send"
1.2 просмотр определённого
- выбираем тип запроса GET,
- прописываем путь  http://localhost:8080/librarians/1 (например, 1)
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: admin
		password: password3
-нажимем "send"
1.3 удаление
- выбираем тип запроса DELETE,
- прописываем путь  http://localhost:8080/librarians/13 (например, 13)
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: admin
		password: password3
-нажимем "send"
1.4 создание
- выбираем тип запроса POST,
- прописываем путь  http://localhost:8080/librarians
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: admin
		password: password3
- рядом выбираем поле body - row - json(text меняем на json) и записываем, что хотим "создать"
(Например,
 {
    "phoneNumber": "00000888",
    "yearOfBirth": 1966,
    "fio": "Бутько Иван Степанович"
})
-нажимем "send"
1.5 изменение
- выбираем тип запроса PUT,
- прописываем путь http://localhost:8080/librarians/2
- чуть ниже выбираем authorization 
- в поле type выбираем Basic Auth, в полях прописываем пользователя: 
		username: admin
		password: password3
- рядом выбираем поле body - row - json(text меняем на json) и записываем, что хотим "ИЗМЕНИТЬ"
(Например,
  {
    "id": 2,
    "phoneNumber": "7734567",
    "yearOfBirth": 1989,
    "fio": "Романов Иван Иванович"
})
-нажимем "send"

После удаления, создания, обновления всегда возвращайтесь к отображению всех записей, чтобы убедиться в успешности действий. Если назначаете или снимаете книгу, то возвращайтесь и также убедитесь в этом.



Если остались вопросы, то пишите на почту: alenkasakhankova20@gmail.com
telegram: @sakhankova03

phone: +375293427438

Linkedin: https://www.linkedin.com/posts/elena-sakhankova-b0a045230_cvsakhankova-activity-7048675243179032576-Kz2p?utm_source=share&utm_medium=member_android
